var mt=Object.defineProperty;var _t=(e,t,a)=>t in e?mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var ae=(e,t,a)=>(_t(e,typeof t!="symbol"?t+"":t,a),a);import{d as B,l as d,f,_ as N,j as o,s as Z,u as K,x as J,at as le,y as ye,z as we,F as ee,k as F,t as ft,G as W,i as gt,S as vt,a as j,az as bt,L as Fe,aA as yt,W as Qe,aB as wt,al as Q,am as Oe,an as Ct,m as Te,q as ue,J as He,aC as De,H as St,n as Me,as as ie,w as et,a4 as tt,ao as Mt,Z as st,Q as Ke,ay as Ae,aD as kt,o as Tt,aE as Et,A as $t,B as xe,aF as It,ak as S}from"./seventv.index.3.0.15.1000.js";import{d as Dt,a as xt,O as Rt,u as _e,b as Vt}from"./seventv.ReactHooks.3.0.15.1000.js";import{g as Pt,d as Lt}from"./seventv.useModule.3.0.15.1000.js";import{u as k,t as I,n as Ee,b as ce,r as P,M as ke,m as at,l as re,a9 as ge,c as fe,a5 as nt,a8 as Ot}from"./seventv.preload-helper.3.0.15.1000.js";import{C as be,a as q,M as qe,b as Ht}from"./seventv.ChatMessage.3.0.15.1000.js";import{u as de}from"./seventv.useChannelContext.3.0.15.1000.js";import{u as ot}from"./seventv.useChatEmotes.3.0.15.1000.js";import{u as Be,a as it}from"./seventv.UiConfirmPrompt.3.0.15.1000.js";import{u as Ge,a as At,b as Nt,U as Ut,_ as Ft,B as Ne,t as Bt,c as Gt}from"./seventv.UserTag.3.0.15.1000.js";import{a as zt,_ as Wt}from"./seventv.ChatData.vue_vue_type_script_setup_true_lang.3.0.15.1000.js";import{b as rt,c as jt,a as Yt}from"./seventv.index.3.0.15.10003.js";import{u as Kt}from"./seventv.main.3.0.15.1000.js";import{n as qt}from"./seventv.useCosmetics.3.0.15.1000.js";import{c as Xt,a as Zt}from"./seventv.Transform.3.0.15.1000.js";import{i as Jt}from"./seventv.index.3.0.15.10004.js";import{a as lt,d as Qt}from"./seventv.StoreSubscribeButton.3.0.15.1000.js";import{U as es}from"./seventv.UiFloating.3.0.15.1000.js";import{v as ts}from"./seventv.v4.3.0.15.1000.js";const ss={class:"seventv-welcome-message"},as=B({__name:"11.Connected",props:{msgData:{}},setup(e){return(t,a)=>(d(),f("span",ss," Welcome to the chat room! "))}});const ns=N(as,[["__scopeId","data-v-39ca32ed"]]),os={},is={width:"20px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-brand)"},rs=o("g",null,[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18 5v8a2 2 0 0 1-2 2H4a2.002 2.002 0 0 1-2-2V5l4 3 4-4 4 4 4-3z"})],-1),ls=[rs];function cs(e,t){return d(),f("svg",is,ls)}const ct=N(os,[["render",cs]]),us={},ds={width:"20px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-current)"},hs=o("g",null,[o("path",{d:"M8.944 2.654c.406-.872 1.706-.872 2.112 0l1.754 3.77 4.2.583c.932.13 1.318 1.209.664 1.853l-3.128 3.083.755 4.272c.163.92-.876 1.603-1.722 1.132L10 15.354l-3.579 1.993c-.846.47-1.885-.212-1.722-1.132l.755-4.272L2.326 8.86c-.654-.644-.268-1.723.664-1.853l4.2-.583 1.754-3.77z"})],-1),ps=[hs];function ms(e,t){return d(),f("svg",ds,ps)}const ut=N(us,[["render",ms]]),_s=e=>(ye("data-v-bbc7f551"),e=e(),we(),e),fs={class:"seventv-sub-message-container seventv-highlight"},gs={class:"sub-part"},vs={class:"sub-message-icon"},bs={class:"sub-message-text"},ys={key:0,class:"sub-name bold"},ws=_s(()=>o("span",{class:"bold"},"Subscribed",-1)),Cs=B({__name:"14.SubscriptionMessage",props:{msg:{},msgData:{}},setup(e){var h,i;const t=e,a=((h=t.msgData.methods)==null?void 0:h.plan)=="Prime"?"Prime":"Tier "+((i=t.msgData.methods)==null?void 0:i.plan.charAt(0));return(p,u)=>(d(),f("span",fs,[o("div",gs,[o("div",vs,[k(a)=="Prime"?(d(),Z(ct,{key:0})):(d(),Z(ut,{key:1}))]),o("div",bs,[p.msg.author?(d(),f("span",ys,I(p.msg.author.displayName),1)):K("",!0),ws,J(" with "+I(k(a))+". ",1)])]),p.msg.body?le(p.$slots,"default",{key:0},void 0,!0):K("",!0)]))}});const Ss=N(Cs,[["__scopeId","data-v-bbc7f551"]]),Ms=e=>(ye("data-v-e8a3b35a"),e=e(),we(),e),ks={class:"seventv-sub-message-container seventv-highlight"},Ts={class:"sub-part"},Es={class:"sub-message-icon"},$s={class:"sub-message-text"},Is={key:0,class:"sub-name bold"},Ds=Ms(()=>o("span",{class:"bold"},"Subscribed",-1)),xs={class:"bold"},Rs={key:0,class:"message-part"},Vs=B({__name:"15.Resubscription",props:{msgData:{}},setup(e){var h,i;const t=e,a=((h=t.msgData.methods)==null?void 0:h.plan)=="Prime"?"Prime":"Tier "+((i=t.msgData.methods)==null?void 0:i.plan.charAt(0));return(p,u)=>{var T;return d(),f("span",ks,[o("div",Ts,[o("div",Es,[((T=p.msgData.methods)==null?void 0:T.plan)=="Prime"?(d(),Z(ct,{key:0})):(d(),Z(ut,{key:1}))]),o("div",$s,[p.msgData.user?(d(),f("span",Is,I(p.msgData.user.displayName),1)):K("",!0),Ds,J(" with "+I(k(a))+". They've subscribed for ",1),o("span",xs,I(p.msgData.cumulativeMonths)+" months",1),p.msgData.shouldShareStreakTenure?(d(),f(ee,{key:1},[J(" , "+I(p.msgData.streakMonths)+" month"+I((p.msgData.streakMonths??0)>1?"s":"")+" in a row. ",1)],64)):(d(),f(ee,{key:2},[J("! ")],64))])]),p.msgData.message?(d(),f("div",Rs,[le(p.$slots,"default",{},void 0,!0)])):K("",!0)])}}});const Ps=N(Vs,[["__scopeId","data-v-e8a3b35a"]]),Ls={},Os={width:"25px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-current)"},Hs=o("g",null,[o("path",{"fill-rule":"evenodd",d:"M16 6h2v6h-1v6H3v-6H2V6h2V4.793c0-2.507 3.03-3.762 4.803-1.99.131.131.249.275.352.429L10 4.5l.845-1.268a2.81 2.81 0 01.352-.429C12.969 1.031 16 2.286 16 4.793V6zM6 4.793V6h2.596L7.49 4.341A.814.814 0 006 4.793zm8 0V6h-2.596l1.106-1.659a.814.814 0 011.49.451zM16 8v2h-5V8h5zm-1 8v-4h-4v4h4zM9 8v2H4V8h5zm0 4H5v4h4v-4z","clip-rule":"evenodd"})],-1),As=[Hs];function Ns(e,t){return d(),f("svg",Os,As)}const Us=N(Ls,[["render",Ns]]),Fs={class:"seventv-sub-message-container seventv-highlight"},Bs={class:"sub-part"},Gs={class:"gift-icon"},zs={class:"sub-message-text"},Ws={class:"sub-name bold"},js={class:"bold"},Ys={class:"bold"},Ks=B({__name:"21.SubGift",props:{msgData:{}},setup(e){return(t,a)=>{var h;return d(),f("span",Fs,[o("div",Bs,[o("div",Gs,[F(Us)]),o("div",zs,[o("span",Ws,I(t.msgData.user.displayName),1),J(" Gifted a "),o("span",js," Tier "+I((h=t.msgData.methods)==null?void 0:h.plan.charAt(0)),1),J(" sub to "),o("span",Ys,I(t.msgData.recipientDisplayName),1)])])])}}});const qs=N(Ks,[["__scopeId","data-v-7102918b"]]),Xs={class:"seventv-raid-message-container"},Zs=B({__name:"26.Raid",props:{msgData:{}},setup(e){return(t,a)=>(d(),f("span",Xs,I(t.msgData.params.displayName)+" raided with a viewer count of "+I(t.msgData.params.viewerCount)+". ",1))}});const Js=N(Zs,[["__scopeId","data-v-39905dd5"]]),Qs={},ea={alt:"mystery gift",class:"mystery-gift-theme__image",src:"https://static-cdn.jtvnw.net/subs-image-assets/gift-illus.png"};function ta(e,t){return d(),f("img",ea)}const sa=N(Qs,[["render",ta]]),aa={class:"seventv-sub-message-container seventv-highlight"},na={class:"sub-part"},oa={class:"gift-icon"},ia={class:"sub-message-text"},ra={class:"sub-name-big"},la=B({__name:"35.SubMysteryGift",props:{msgData:{}},setup(e){return(t,a)=>(d(),f("span",aa,[o("div",na,[o("div",oa,[F(sa)]),o("div",ia,[o("span",ra,I(t.msgData.user.displayName),1),J(" is gifting "+I(t.msgData.massGiftCount)+" Tier "+I(t.msgData.plan.charAt(0))+" Sub"+I(t.msgData.massGiftCount>1?"s":"")+" to "+I(t.msgData.channel)+"'s community. ",1),t.msgData.senderCount==t.msgData.massGiftCount?(d(),f(ee,{key:0},[J(" It's their first Gift Sub in the channel! ")],64)):(d(),f(ee,{key:1},[J(" They've gifted a total of "+I(t.msgData.senderCount)+" Subs in the channel! ",1)],64))])])]))}});const ca=N(la,[["__scopeId","data-v-d3a2d72d"]]),ua={},da={type:"color-fill-current",width:"1em",height:"1em",version:"1.1",viewBox:"0 0 20 20",fill:"currentColor"},ha=o("g",null,[o("path",{d:"M10 6a4 4 0 014 4h-2a2 2 0 00-2-2V6z"}),o("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-2 0a6 6 0 11-12 0 6 6 0 0112 0z","clip-rule":"evenodd"})],-1),pa=[ha];function ma(e,t){return d(),f("svg",da,pa)}const _a=N(ua,[["render",ma]]),fa={class:"seventv-reward-message-container seventv-highlight"},ga={key:0,class:"reward-part"},va={class:"reward-left"},ba={class:"reward-username bold"},ya={class:"reward-name bold"},wa={class:"reward-cost bold"},Ca=["highlight"],Sa=B({__name:"43.PointsReward",props:{msg:{},msgData:{}},setup(e){return(t,a)=>(d(),f("span",fa,[t.msgData.reward?(d(),f("div",ga,[o("div",va,[o("span",ba,I(t.msgData.displayName),1),J(" redeemed "),o("span",ya,I(t.msgData.reward.name),1)]),o("span",wa,[F(_a),o("span",null,I(t.msgData.reward.cost),1)])])):K("",!0),t.msgData.message?(d(),f("div",{key:1,class:"message-part",highlight:t.msgData.reward.isHighlighted},[le(t.$slots,"default",{},void 0,!0)],8,Ca)):K("",!0)]))}});const Ma=N(Sa,[["__scopeId","data-v-397239f8"]]),ka={},Ta={fill:"var(--color-fill-current)",width:"18px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px"},Ea=o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 14l7 4V2l-7 4H4a2 2 0 00-2 2v4a2 2 0 002 2h2v4h2v-4h3zm1-6.268l4-2.286v9.108l-4-2.286V7.732zM10 12H4V8h6v4z"},null,-1),$a=[Ea];function Ia(e,t){return d(),f("svg",Ta,$a)}const Da=N(ka,[["render",Ia]]),xa=e=>(ye("data-v-36fc91c5"),e=e(),we(),e),Ra={class:"announce-header"},Va={class:"announce-icon"},Pa=xa(()=>o("div",{class:"announce-title"},"Announcement",-1)),La={class:"announce-message"},Oa=B({__name:"49.AnnouncementMessage",props:{msgData:{}},setup(e){const t=e,a=de(),h=Ge(a),i="announcement-line--"+(t.msgData.color=="PRIMARY"&&h.primaryColorHex==null?"purple":t.msgData.color.toLowerCase());return(p,u)=>(d(),f("div",{class:Ee(["seventv-announce-message-container",i])},[o("div",Ra,[o("div",Va,[F(Da)]),Pa]),o("div",La,[le(p.$slots,"default",{},void 0,!0)])]))}});const Ha=N(Oa,[["__scopeId","data-v-36fc91c5"]]),Aa=["level"],Na={class:"seventv-paid-message-heading"},Ua={class:"seventv-paid-message-content"},Fa={class:"seventv-paid-message-payment"},Ba=B({__name:"55.PaidMessage",props:{msgData:{}},setup(e){const t={SIX:1,SEVEN:1,EIGHT:1,NINE:1,TEN:1};return(a,h)=>(d(),f("div",{class:Ee(["seventv-paid-message",{"seventv-paid-message-animated":t[a.msgData.level]}]),level:a.msgData.level},[o("div",Na,[a.msgData.message.user?(d(),Z(At,{key:0,user:{id:a.msgData.message.user.userID,username:a.msgData.message.user.userLogin,displayName:a.msgData.message.user.displayName||a.msgData.message.user.userLogin,color:a.msgData.message.user.color},badges:a.msgData.message.badges},null,8,["user","badges"])):K("",!0)]),o("div",Ua,[a.msgData.message?le(a.$slots,"default",{key:0,hideAuthor:!0},void 0,!0):K("",!0),o("div",Fa,I(a.msgData.currency)+" "+I((a.msgData.amount/100).toFixed(2)),1)])],10,Aa))}});const Ga=N(Ba,[["__scopeId","data-v-936793cd"]]);function za(e){const t=e;return Array.isArray(t.messageParts)&&typeof t.messageType=="number"}function Wa(e){const t=e;return Array.isArray(t.messageParts)||typeof t.message=="object"}function ja(e){return typeof e.moderationType=="number"}const Xe=new Map;function Ze(e,t=!0){const a=t?Xe.get(e)||Xe.set(e,new Audio(e)).get(e):new Audio(e),h=(p=1)=>{a.volume=p,a.play()},i=()=>a.pause();return ft(()=>{a.remove()}),{play:h,stop:i,audio:a}}const Je=new WeakMap,Re=W("highlights.custom"),Ya=W("highlights.sound_volume");function dt(e){const t=rt(),a=gt(vt,""),h=ce({ping:Ze(a+"/sound/ping.ogg")});let i=Je.get(e);i||(i=ce({highlights:{}}),j(Re,l=>{if(i){for(const[s,y]of Object.entries(i.highlights))y.persist&&delete i.highlights[s];for(const[,s]of l)i.highlights[s.id]=s,T(s),L(s)}},{immediate:!0}),Je.set(e,i));const p=Dt(function(){if(!i)return;const l=Array.from(Object.values(i.highlights)).filter(s=>s.persist).map(s=>[s.id,ke({...s,soundFile:ke(s.soundFile),soundDef:void 0,flashTitleFn:void 0})]);Re.value=new Map(l)},250);function u(l,s,y){if(!i)return{};const O=i.highlights[l]={...s,id:l,persist:y};return T(O),y&&(Re.value.set(l,at(O)),p()),O}function T(l){var O;if(!l.soundFile){(O=l.soundPath)!=null&&O.startsWith("#")&&h[l.soundPath.slice(1)]&&(l.soundDef=h[l.soundPath.slice(1)]);return}const s=new Blob([l.soundFile.data],{type:l.soundFile.type}),y=URL.createObjectURL(s);return l.soundPath=y,l.soundDef=Ze(y),y}function L(l){l.flashTitleFn=l.flashTitle?()=>` ðŸ’¬ Highlight: ${l.label||l.pattern}`:void 0}function v(l){i&&(delete i.highlights[l],p())}function E(l,s){if(!i)return!1;const y=i==null?void 0:i.highlights[l];if(!y)return!1;let O=!1;if(y.regexp){let Y=y.cachedRegExp;if(!Y)try{Y=new RegExp(y.pattern,"i"),Object.defineProperty(y,"cachedRegExp",{value:Y})}catch(M){return re.warn("<ChatHighlights>","Invalid regexp:",y.pattern??""),s.setHighlight("#878787","Error "+M.message),!1}O=Y.test(s.body)}else y.pattern?O=y.caseSensitive?s.body.includes(y.pattern):s.body.toLowerCase().includes(y.pattern.toLowerCase()):typeof y.test=="function"&&(O=y.test(s));return O&&(s.setHighlight(y.color,y.label),y.soundDef&&!s.historical&&y.soundDef.play(Ya.value/100),y.flashTitleFn&&!s.historical&&R(y,s)),O}const D=P(""),_=P(document.title);let x=0;const b=bt(()=>{jt(x++%2===0?D.value:_.value)},1e3,{immediate:!1,immediateCallback:!0});function R(l,s){!l.flashTitleFn||b.isActive.value||(_.value=document.title,D.value=l.flashTitleFn(s),b.resume(),Fe(t).toBe("visible").then(()=>{b.pause(),D.value="",document.title=_.value}))}function m(){return i?yt(i.highlights):{}}function C(l,s){if(!i)return;const y=i.highlights[l];y&&(i.highlights[s]=y,delete i.highlights[l],y.id=s,p())}return{define:u,remove:v,getAll:m,save:p,updateId:C,checkMatch:E,updateSoundData:T,updateFlashTitle:L}}const Ka=["id"],qa=B({__name:"ChatMessageUnhandled",props:{msg:{}},setup(e){const t=e,a=P(null);return Qe(()=>{!a.value||!t.msg.wrappedNode||a.value.appendChild(t.msg.wrappedNode)}),(h,i)=>(d(),f("span",{id:h.msg.id,ref_key:"msgContainer",ref:a,class:"seventv-unhandled-message-ref"},null,8,Ka))}}),ve=300,Xa=40,Ve=80,Za=1209600;function Ja(e){return e<60?`${Math.round(e)} seconds`:e<60*60?`${Math.round(e/60)} minutes`:e<60*60*24?`${Math.round(e/(60*60))} hours`:`${Math.round(e/(60*60*24))} days`}class Qa{constructor(t=!1){ae(this,"command","");ae(this,"banDuration",null);ae(this,"text","");ae(this,"time",0);ae(this,"banVis",0);ae(this,"unbanVis",0);ae(this,"color","");ae(this,"pos","0px");this.isActor=t}secondsToBanDuration(t){const a=Jt({start:0,end:t*1e3});return"".concat(a.seconds?`${a.seconds}s`:"",a.days?`${a.days}d`:"",a.hours?`${a.hours}h`:"",a.minutes?`${a.minutes}m`:"")}calculate(t){if(this.pos=`${this.isActor?Math.max(0,t):t}px`,t<-40&&!this.isActor)this.command="unban",this.unbanVis=1;else if(t<Xa){this.command="",this.text="",this.color="";return}else if(t<Ve)this.command="delete",this.text="Delete",this.color="#FFFF00",this.banVis=1;else if(t<ve&&!this.isActor){const a=Math.pow((t+.25*ve-Ve)/(1.25*ve-Ve),10)*Za;this.command="ban",this.banDuration=this.secondsToBanDuration(Math.round(a))||"14d",this.text=String(Ja(a)),this.color="#FFA500",this.banVis=1}else t>=ve&&!this.isActor&&(this.command="ban",this.banDuration=null,this.text="Ban",this.color="#C40000",this.banVis=1)}}const en=e=>(ye("data-v-56d4a96d"),e=e(),we(),e),tn={class:"grabbable-wrapper"},sn=en(()=>o("div",{class:"grabbable-inner"},[o("div",{class:"dots"})],-1)),an=[sn],nn={class:"wrapped"},on=B({__name:"ModSlider",props:{msg:{}},setup(e){var x,b;const t=e,a=de(),h=Nt(a,((x=t.msg.author)==null?void 0:x.username)??""),i=P(!1),p=P(!1),u=ce(new Qa(((b=t.msg.author)==null?void 0:b.isActor)??!1)),T=ge(u,"pos");let L=0;const v=P(!1);j(()=>[a.actor.roles.has("MODERATOR")],R=>{v.value=R.every(m=>m)},{immediate:!0});const E=R=>{R.stopPropagation(),L=R.pageX,p.value=!0,R.target.setPointerCapture(R.pointerId)},D=R=>{var m;if(p.value=!1,u.command&&t.msg.author)switch(u.command){case"ban":h.banUserFromChat(((m=u.banDuration)==null?void 0:m.toString())??null);break;case"unban":h.unbanUserFromChat();break;case"delete":h.deleteChatMessage(t.msg.id);break}i.value=!0,setTimeout(()=>i.value=!1,300),u.calculate(0),R.target.releasePointerCapture(R.pointerId)},_=R=>{if(!p.value)return;R.preventDefault();const m=Math.max(Math.min(R.pageX-L,ve),-60);u.calculate(m)};return(R,m)=>v.value?(d(),f("div",{key:0,class:"seventv-ban-slider",style:fe({transform:"translateX("+T.value+")",transition:i.value?"transform 0.3s ease":"none",boxShadow:p.value?"black 0px 0.1rem 0.2rem":"none"})},[o("div",{class:"ban-background",style:fe({backgroundColor:u.color,width:T.value})},[o("span",{class:"text",style:fe({opacity:u.banVis})},I(u.text),5)],4),o("div",tn,[o("div",{class:"grabbable-outer",onPointerdown:E,onPointerup:D,onPointermove:_},an,32)]),o("div",nn,[le(R.$slots,"default",{},void 0,!0)]),o("div",{class:"unban-background",style:fe({width:"calc(-1 *"+T.value+")"})},[o("span",{class:"text",style:fe({opacity:u.unbanVis})}," Unban ",4)],4)],4)):le(R.$slots,"default",{key:1},void 0,!0)}});const rn=N(on,[["__scopeId","data-v-56d4a96d"]]),ln=["alternating-background"],cn=["msg-id"],un=B({__name:"ChatList",props:{list:{},messageHandler:{}},setup(e,{expose:t}){const a=e,h=de(),{identity:i}=wt(Kt()),p=ot(h),u=Be(h),T=ge(u,"displayed"),L=it(h),v=Ge(h),E=dt(h),D=rt(),_=ge(v,"hovering"),x=P(!1),b=W("chat.mod_slider"),R=W("chat.mod_messages"),m=W("chat.alternating_background"),C=W("highlights.basic.mention"),l=W("highlights.basic.first_time_chatter"),s=W("highlights.basic.self"),y=W("highlights.basic.mention_sound"),O=W("highlights.basic.mention_title_flash"),Y=W("highlights.basic.restricted_low_trust_user"),M=ge(a,"messageHandler"),Ce=ge(a,"list"),he=P(),$e=Object.assign({"/src/app/chat/msg/0.NormalMessage.vue":Ft,"/src/app/chat/msg/11.Connected.vue":ns,"/src/app/chat/msg/14.SubscriptionMessage.vue":Ss,"/src/app/chat/msg/15.Resubscription.vue":Ps,"/src/app/chat/msg/21.SubGift.vue":qs,"/src/app/chat/msg/26.Raid.vue":Js,"/src/app/chat/msg/35.SubMysteryGift.vue":ca,"/src/app/chat/msg/43.PointsReward.vue":Ma,"/src/app/chat/msg/49.AnnouncementMessage.vue":Ha,"/src/app/chat/msg/55.PaidMessage.vue":Ga,"/src/app/chat/msg/BasicSystemMessage.vue":Ne,"/src/app/chat/msg/EmoteSetUpdateMessage.vue":zt}),oe={},Se=/src\/app\/chat\/msg\/(\d+)\.(\w+)\.vue$/;for(const[n,r]of Object.entries($e)){const[,g]=n.match(Se)??[];if(!g)continue;const A=parseInt(g);Number.isNaN(A)||(oe[A]=r)}function Ie(n){return oe[n]??null}const pe=n=>{const r=new be(n.id);switch(r.channelID=h.id,n.type){case q.MESSAGE:case q.SUBSCRIPTION:case q.RESUBSCRIPTION:case q.SUB_GIFT:case q.RAID:case q.SUB_MYSTERY_GIFT:case q.CHANNEL_POINTS_REWARD:case q.ANNOUNCEMENT_MESSAGE:case q.RESTRICTED_LOW_TRUST_USER_MESSAGE:case q.PAID_MESSAGE:case q.CONNECTED:me(r,n);break;case q.MODERATION:if(!ja(n))break;c(n);break;case q.MESSAGE_ID_UPDATE:w(n);break;default:return!1}return u.handlers.forEach(g=>g(n)),!0};function me(n,r,g=!0){var se,G,ne,ze,We,je,Ye;const A=Ie(r.type);A&&n.setComponent(A,{msgData:r}),n.instance||n.setComponent(oe[0],{msgData:r}),r.type===q.RESTRICTED_LOW_TRUST_USER_MESSAGE&&Y.value&&n.setHighlight("#ff7d00","Restricted Suspicious User");const V=r.user??((se=r.message)==null?void 0:se.user)??null;if(V){const z=u.chatters[V.userID],H=V.color?v.useHighContrastColors?qt(V.color,v.isDarkTheme):V.color:null;if(z&&(z.username=V.userLogin,z.displayName=V.userDisplayName??V.displayName??V.userLogin,z.color=H??z.color,z.intl=V.isIntl),n.setAuthor(z??{id:V.userID,username:V.userLogin??((G=V.userDisplayName??V.displayName)==null?void 0:G.toLowerCase()),displayName:V.userDisplayName??V.displayName??V.userLogin,color:H}),n.author&&v.blockedUsers.has(n.author.id)){if(!h.actor.roles.has("MODERATOR")){re.debug("Ignored message from blocked user",n.author.id);return}n.setHighlight("#9488855A","You Blocked This User")}i.value&&n.author&&n.author.id===i.value.id&&(n.author.isActor=!0),n.badges=r.badges??((ne=r.message)==null?void 0:ne.badges)??{}}if(Wa(r)){if(n.body=(r.messageBody??((ze=r.message)==null?void 0:ze.messageBody)??"").replace(`
`," "),typeof r.nonce=="string"&&n.setNonce(r.nonce),r.isFirstMsg&&l.value?n.setHighlight("#c832c8","First Message"):r.isReturningChatter&&n.setHighlight("#3296e6","Returning Chatter"),r.reply){const z=r.reply.parentUserLogin&&r.reply.parentDisplayName?{username:r.reply.parentUserLogin,displayName:r.reply.parentDisplayName}:null;n.parent={id:r.reply.parentMsgId,uid:r.reply.parentUid,deleted:r.reply.parentDeleted,body:r.reply.parentMessageBody,author:z},E.checkMatch("~reply",n)}r.messageType===1&&(n.slashMe=!0);for(const z of r.messageParts??((We=r.message)==null?void 0:We.messageParts)??[])switch(z.type){case qe.EMOTE:{const H=z.content;if(!H.alt||(je=H.emoteID)!=null&&je.startsWith("__FFZ__")||(Ye=H.emoteID)!=null&&Ye.startsWith("__BTTV__"))continue;n.nativeEmotes[H.alt+(H.cheerAmount??"")]={id:H.emoteID??"",name:H.alt,flags:0,provider:"PLATFORM",isTwitchCheer:{amount:H.cheerAmount,color:H.cheerColor},data:H.cheerAmount?Xt({alt:H.alt,cheerAmount:H.cheerAmount,cheerColor:H.cheerColor,images:H.images}):Zt({id:H.emoteID,token:H.alt})};break}case qe.FLAGGEDSEGMENT:{const H=z;if(!H.originalText)continue;n.body=n.body.replace(H.originalText,"*".repeat(H.originalText.length));break}}}if(r.nonce){n.setDeliveryState("IN_FLIGHT");const{stop:z}=St(()=>{n.setDeliveryState("BOUNCED")},1e4);Fe(P(n.deliveryState)).toBe("SENT").then(z)}za(r)?n.setTimestamp(r.timestamp):r.message&&n.setTimestamp(r.message.timestamp??0);for(const z in E.getAll())E.checkMatch(z,n);h.actor.roles.has("MODERATOR")&&(n.pinnable=!0,n.deletable=!0),g&&u.add(n)}function c(n){if(n.moderationType===Ht.DELETE){const r=u.find(g=>g.id==n.targetMessageID);r&&(r.moderation.deleted=!0)}else{const r=u.moderated[0];if(r&&r.victim&&r.victim.username===n.userLogin&&r.mod.banDuration===n.duration)return;const g=u.messagesByUser(n.userLogin),A={actionType:n.duration>0?"TIMEOUT":"BAN",banDuration:n.duration,banReason:n.reason,actor:null,banned:!0,deleted:!1,timestamp:Date.now()};let V=null;for(const se of g)se.moderation=A,V||(V=se.author);if(u.moderated.unshift({id:Symbol("seventv-moderation-message"),messages:g.reverse().slice(0,10),mod:A,victim:V||{id:n.userLogin,username:n.userLogin,displayName:n.userLogin,color:""}}),u.moderated.length>125&&Me(()=>{for(;u.moderated.length>100;)u.moderated.pop()}),R.value&&!h.actor.roles.has("MODERATOR")){const se=new be().setComponent(Ne,{text:n.userLogin+(n.duration>0?` was timed out (${n.duration}s)`:" was permanently banned")});u.add(se)}}}function w(n){const r=u.find(g=>g.nonce==n.nonce);r&&(r.setID(n.id),r.setDeliveryState("SENT"))}j(M,(n,r)=>{n!==r&&r?Q(r,"handleMessage"):n&&Oe(n,"handleMessage",function(g,A){return pe(A)?"":($.set(A.id,A),g==null?void 0:g.call(this,A))})},{immediate:!0});const $=ce(new Map),U=new Map;Ct(Ce.value.domNodes,n=>{const r=new Set(U.keys());for(const[g,A]of Object.entries(n)){if(g==="root"||(r.delete(g),U.has(g)||!$.has(g)))continue;const V=new be(g+"-unhandled");V.wrappedNode=A,u.add(V),U.set(g,A)}for(const g of r)U.delete(g)},{debounce:100,immediate:!0});const{alt:te}=Yt();let X=!1;return j([te,_],([n,r])=>{L.paused?X&&(L.unpause(),X=!1):(r&&v.pauseReason.has("MOUSEOVER")||r&&n&&v.pauseReason.has("ALTKEY"))&&(L.pause(),X=!0)}),j([i,s],([n,r])=>{r&&n?E.define("~self",{test:g=>!!(g.author&&n)&&g.author.id===n.id,label:"You",color:"#3ad3e0"}):E.remove("~self")},{immediate:!0}),j(D,n=>{n==="hidden"&&!L.paused?(L.pause(),x.value=!0):x.value&&(L.unpause(),x.value=!1)}),j([i,C,y,O],([n,r,g,A])=>{const V=n?`\\b${n.username}\\b`:null;if(!V)return;const se=new RegExp(V,"i");r?(E.define("~mention",{test:G=>!!(n&&G.author&&G.author.username!==n.username&&se.test(G.body)),label:"Mentions You",color:"#e13232",soundPath:g?"#ping":void 0,flashTitleFn:A?G=>{var ne;return`ðŸ”” @${((ne=G.author)==null?void 0:ne.username)??"A user"} mentioned you`}:void 0,flashTitle:!0}),E.define("~reply",{test:G=>!!(G.parent&&G.parent.author&&G.author&&G.author.username!==G.parent.author.username&&se.test(G.parent.author.username)),label:"Replying to You",color:"#e13232",soundPath:g?"#ping":void 0,flashTitleFn:A?G=>{var ne;return`ðŸ”” @${((ne=G.author)==null?void 0:ne.username)??"A user"} replied to you`}:void 0,flashTitle:!0})):(E.remove("~mention"),E.remove("~reply"))},{immediate:!0}),t({onMessage:pe,onChatMessage:me}),(n,r)=>(d(),f("main",{ref_key:"chatListEl",ref:he,class:"seventv-chat-list","alternating-background":k(m)},[(d(!0),f(ee,null,Te(T.value,g=>(d(),f("div",{key:g.sym,"msg-id":g.id,class:"seventv-message"},[g.instance?(d(),Z(He(k(b)&&k(h).actor.roles.has("MODERATOR")&&g.author?rn:"span"),nt(De({key:0},{msg:g})),{default:ue(()=>[(d(),Z(He(g.instance),De(g.componentProps,{msg:g}),{default:ue(A=>[F(Ut,De(A,{msg:g,emotes:k(p).active,chatters:k(u).chattersByUsername}),null,16,["msg","emotes","chatters"])]),_:2},1040,["msg"]))]),_:2},1040)):(d(),Z(qa,{key:1,msg:g},null,8,["msg"]))],8,cn))),128))],8,ln))}});const dn=N(un,[["__scopeId","data-v-90e21ec9"]]),hn={},pn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",fill:"currentColor",width:"1em",height:"1em"},mn=o("path",{d:"M128 64H0V448H128V64zm192 0H192V448H320V64z"},null,-1),_n=[mn];function fn(e,t){return d(),f("svg",pn,_n)}const gn=N(hn,[["render",fn]]),Ue=P(null),ht=P(null);ie(window,"__Twitch__pubsubInstances",{value(e){!e||!e.production||!e.production._client||(Ue.value=e.production._client,ie(Ue.value,"_primarySocket",{value(t){!t||!t._socket||(ht.value=t._socket)}}))}});function vn(){return ce({client:Ue,socket:ht})}const bn=B({__name:"ChatPubSub",setup(e){const t=de(),a=Be(t),h=vn(),i=W("highlights.basic.monitored_low_trust_user");et(()=>{h.socket&&(h.socket.removeEventListener("message",p),h.socket.addEventListener("message",p))});function p(v){let E;try{E=JSON.parse(v.data)}catch(R){re.error("Failed to parse pubsub message",R.message);return}if(E.type!=="MESSAGE")return;const{topic:D,message:_}=E.data??{};if(typeof D!="string"||typeof _!="string"){re.warn("received an invalid pubsub message");return}const{type:x,data:b}=JSON.parse(_??{});switch(x){case"low_trust_user_new_message":u(b);break;case"moderation_action":T(b);break;case"chat_rich_embed":L(b);break}}async function u(v){if(!v.low_trust_user||!i.value)return;const D=await a.awaitMessage(v.message_id).catch(_=>{re.debug("failed to find new message for low trust user",_.message)});D&&D.setHighlight("#ff7d00","Monitored Suspicious User")}async function T(v){const E=v.moderation_action;if(E)switch(E){case"ban":case"timeout":{const D=a.messagesByUser(v.target_user_login);if(!D)return;const _=v.args[1]||null,x=v.args[2]??"";for(const b of D)b.moderation.banReason=x,b.moderation.actor=v.created_by_user_id?{id:v.created_by_user_id,username:v.created_by??"",displayName:v.created_by??"",color:""}:null,b.moderation.banDuration=_?parseInt(_):null,b.moderation.banned=!0;break}}}async function L(v){if(!v.twitch_metadata)return;const D=await a.awaitMessage(v.message_id).catch(C=>{re.debug("failed to find new message for chat rich embed",C.message)});if(!D)return;const{title:_,author_name:x,request_url:b,thumbnail_url:R,twitch_metadata:m}=v;D.richEmbed.title=_,D.richEmbed.author_name=x,D.richEmbed.request_url=b,D.richEmbed.thumbnail_url=R,D.richEmbed.twitch_metadata=m}return tt(()=>{h.socket&&h.socket.removeEventListener("message",p)}),(v,E)=>null}}),yn=B({__name:"ChatTray",setup(e){return(t,a)=>(d(!0),f(ee,null,Te(k(Bt),({parent:h,component:i,props:p},u)=>(d(),f(ee,{key:u},[h.current?(d(),Z(st,{key:0,to:h.current},[(d(),Z(He(i),nt(Mt(p)),null,16))],8,["to"])):K("",!0)],64))),128))}}),wn={id:"seventv-message-container",class:"seventv-message-container"},Cn=B({__name:"ChatController",props:{controller:{},room:{},list:{},buffer:{},events:{}},setup(e){const t=e,a=Pt("chat"),{sendMessage:h}=Ke(),{list:i,controller:p,room:u}=Ot(t),T=document.createElement("seventv-container");T.id="seventv-chat-controller";const L=P(),v=P(T),E=P(null),D=P(T.getBoundingClientRect()),_=P(),x=P(""),b=de(t.controller.component.props.channelID,!0),R=Ke(),m=ot(b),C=Be(b),l=it(b,{scroller:_,bounds:D}),s=Ge(b),y=Gt(b),O=W("chat.line_limit",150),Y=W("chat.ignore_clear_chat"),M=P(null);et(()=>{if(!i.value||!i.value.domNodes)return;const c=i.value.domNodes.root;c&&(c.classList.add("seventv-chat-list"),v.value=c)});const Ce=P(null);j(i,(c,w)=>{if(!(!c||!c.component)){if(w&&w.component&&c!==w){Q(w.component,"props");return}ie(c.component,"props",{value($){var te,X;Ce.value=$.messageHandlerAPI;const U=(te=$.children[0])==null?void 0:te.props;(X=U==null?void 0:U.badgeSets)!=null&&X.count&&(s.twitchBadgeSets=U.badgeSets)}})}},{immediate:!0});const he=P([]),$e=Ae(he,1e3);j($e,async c=>{if(c.length)for(const w of he.value)w.id==="FrankerFaceZWasHere"||w.id==="BETTERTTV_EMOTES"||h("SYNC_TWITCH_SET",{input:ke(w)})}),j(u,(c,w)=>{!c||!c.component||(w&&w.component&&c!==w&&Q(w.component,"props"),ie(u.value.component,"props",{value($){switch(s.primaryColorHex=$.primaryColorHex,x.value=`#${$.primaryColorHex??"755ebc"}`,document.body.style.setProperty("--seventv-channel-accent",x.value),s.useHighContrastColors=$.useHighContrastColors,s.showTimestamps=$.showTimestamps,s.showModerationIcons=$.showModerationIcons,s.pauseReason.clear(),s.pauseReason.add("SCROLL"),$.chatPauseSetting){case"MOUSEOVER_ALTKEY":s.pauseReason.add("ALTKEY"),s.pauseReason.add("MOUSEOVER");break;case"MOUSEOVER":s.pauseReason.add("MOUSEOVER");break;case"ALTKEY":s.pauseReason.add("ALTKEY");break}}}))},{immediate:!0}),ie(p.value.component,"props",{value(c){c.channelID&&(M.value={id:c.channelID,username:c.channelLogin,displayName:c.channelDisplayName,active:!0});for(const[$,U]of[["VIP",c.isCurrentUserVIP],["EDITOR",c.isCurrentUserEditor],["MODERATOR",c.isCurrentUserModerator||c.channelID===c.userID],["BROADCASTER",c.channelID===c.userID]])U&&b.actor.roles.add($);s.isDarkTheme=c.theme,C.sendMessage=c.chatConnectionAPI.sendMessage,Oe(c.chatConnectionAPI,"sendMessage",function($,...U){var te;R.sendMessage("CHANNEL_ACTIVE_CHATTER",{channel:ke(b.base)});for(const X of((te=a.instance)==null?void 0:te.messageSendMiddleware.values())??[])U[0]=X(U[0]);return $==null?void 0:$.apply(this,U)});const w=c.emoteSetsData;!w||w.loading||(he.value=w.emoteSets)}});const oe=xt({parentSelector:".stream-chat",predicate:c=>c.props&&(c.props.onShowViewerCard||c.openUserCard)});oe.then(([c])=>{c&&y.update("TWITCH","onShowViewerCard",c.props.onShowViewerCard??c.openUserCard)},()=>null),oe instanceof Rt&&Fe(kt(1e4)).toBeTruthy().then(()=>oe.disconnect());const Se=P(null),Ie=Ae(Se,100);j(Ie,(c,w)=>{w&&c!==w?(Q(w,"buffer"),Q(w,"blockedUsers")):c&&(ie(c,"buffer",{value($){var te;if(!$.length)return;const U=[];for(const X of $){const n=new be(X.id);if(X.isHistorical||X.type===q.CONNECTED){n.historical=!0,(te=L.value)==null||te.onChatMessage(n,X,!1),U.push(n);continue}}C.displayed=U.concat(C.displayed),Me(()=>{l.scrollToLive(0),Q(c,"buffer")})}}),ie(c,"blockedUsers",{value($){s.blockedUsers=$}}))}),j(M,c=>{!c||!b.setCurrentChannel(c)||(C.clear(),l.unpause(),Me(()=>m.resetProviders()))},{immediate:!0}),j(()=>t.buffer,c=>{const w=c==null?void 0:c.component;w&&(Se.value=w)},{immediate:!0});const pe=P(null);j(()=>t.events,c=>{!c||!c.component||(pe.value=c.component)},{immediate:!0}),j(pe,(c,w)=>{w&&Q(w,"onClearChatEvent"),c&&Oe(c,"onClearChatEvent",$=>{const U=new be().setComponent(Ne,{text:Y.value?"Chat clear prevented by 7TV":"Chat cleared by a moderator"});return Y.value||C.clear(),C.add(U),$==null?void 0:$.apply(this,[{channel:""}])})},{immediate:!0});const me=new ResizeObserver(()=>{D.value=v.value.getBoundingClientRect()});return me.observe(v.value),Tt(()=>{C.clear()}),tt(()=>{me.disconnect(),T.remove(),E.value&&E.value.classList.remove("seventv-checked"),re.debug("<ChatController> Unmounted"),Q(p.value.component,"props"),i.value&&(Q(i.value.component.props,"messageHandlerAPI"),Q(i.value.component,"props")),u.value&&Q(u.value.component,"props"),document.body.style.removeProperty("--seventv-channel-accent")}),(c,w)=>(d(),f(ee,null,[k(b).id?(d(),Z(st,{key:0,to:v.value},[F(lt,{ref_key:"scrollerRef",ref:_,class:"seventv-chat-scroller",onContainerScroll:k(l).onScroll,onContainerWheel:k(l).onWheel,onMouseenter:w[1]||(w[1]=$=>k(s).hovering=!0),onMouseleave:w[2]||(w[2]=$=>k(s).hovering=!1)},{default:ue(()=>[o("div",wn,[F(dn,{ref_key:"chatList",ref:L,list:k(i),"message-handler":Ce.value},null,8,["list","message-handler"])]),k(l).paused?(d(),f("div",{key:0,class:"seventv-message-buffer-notice",onClick:w[0]||(w[0]=(...$)=>k(l).unpause&&k(l).unpause(...$))},[F(gn),k(l).pauseBuffer.length?(d(),f("span",{key:0,class:Ee({capped:k(l).pauseBuffer.length>=k(O)})},I(k(l).pauseBuffer.length),3)):K("",!0),o("span",null,I(k(l).pauseBuffer.length>0?"new messages":"Chat Paused"),1)])):K("",!0)]),_:1},8,["onContainerScroll","onContainerWheel"]),k(b).loaded?(d(),Z(Wt,{key:0})):K("",!0)],8,["to"])):K("",!0),F(yn),F(bn)],64))}});const Sn=["checked"],Pe=B({__name:"FormCheckbox",props:{checked:{type:Boolean}},emits:["update:checked","update:modelValue"],setup(e,{emit:t}){function a(h){const i=h.target.checked;t("update:checked",i),t("update:modelValue",i)}return(h,i)=>(d(),f("div",null,[o("input",{id:"checkbox",checked:h.checked,type:"checkbox",onChange:a},null,40,Sn)]))}}),Mn=["type","error","autofocus","value","placeholder"],kn=B({__name:"FormInput",props:{label:{},modelValue:{},type:{default:"text"},icon:{},error:{type:Boolean},width:{},appearance:{default:"outline"},autofocus:{type:Boolean}},emits:["update:modelValue","blur"],setup(e,{expose:t,emit:a}){const h=e;Et(u=>({"46d8f494":u.width}));const i=u=>a("update:modelValue",u.target.value),p=P(null);return t({focus:()=>{var u;return(u=p.value)==null?void 0:u.focus()}}),Qe(()=>{p.value&&h.autofocus&&p.value.focus()}),(u,T)=>(d(),f("input",{ref_key:"inputEl",ref:p,type:u.type,error:u.error,autofocus:u.autofocus,value:u.modelValue,placeholder:u.label,onInput:i,onBlur:T[0]||(T[0]=L=>a("blur"))},null,40,Mn))}});const Le=N(kn,[["__scopeId","data-v-09ac3f20"]]),Tn={},En={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",width:"1em",height:"1em"},$n=o("path",{d:"M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 32a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm-96-32a96 96 0 1 0 192 0 96 96 0 1 0 -192 0zM96 240c0-35 17.5-71.1 45.2-98.8S205 96 240 96c8.8 0 16-7.2 16-16s-7.2-16-16-16c-45.4 0-89.2 22.3-121.5 54.5S64 194.6 64 240c0 8.8 7.2 16 16 16s16-7.2 16-16z"},null,-1),In=[$n];function Dn(e,t){return d(),f("svg",En,In)}const xn=N(Tn,[["render",Dn]]),pt=e=>(ye("data-v-a22bf14e"),e=e(),we(),e),Rn={class:"seventv-settings-custom-highlights"},Vn=pt(()=>o("div",{class:"tabs"},null,-1)),Pn={class:"list"},Ln=pt(()=>o("div",{class:"item heading"},[o("div",null,"Pattern"),o("div",null,"Label"),o("div",{class:"centered"},"Flash Title"),o("div",{class:"centered"},"RegExp"),o("div",null,"Case Sensitive"),o("div",null,"Color")],-1)),On=["onClick"],Hn=["onClick"],An={name:"flash-title",class:"centered"},Nn={name:"is-regexp",class:"centered"},Un={name:"case-sensitive",class:"centered"},Fn={name:"color"},Bn=["onUpdate:modelValue","onInput"],Gn={class:"sound-options"},zn=["active","onClick"],Wn=["active","onClick"],jn=["active"],Yn={key:0},Kn=["onInput"],qn={class:"item create-new"},Xn={name:"pattern"},Zn=B({__name:"SettingsConfigHighlights",setup(e){const t=de(),a=dt(t),h=P(""),i=ce({pattern:new WeakMap,label:new WeakMap}),p=P();function u(m,C){const l=i[C].get(m);l&&l.focus()}function T(m,C){if(!i[C].get(m))return;const s=ts();a.updateId("new-highlight",s),a.save()}function L(m,C){m.flashTitle=C,a.updateFlashTitle(m),a.save()}function v(m,C){m.regexp=C,a.save()}function E(m,C){m.caseSensitive=C,a.save()}function D(m,C){if(!(C.target instanceof HTMLInputElement))return;const l=C.target.value;m.color=l,a.save()}function _(m,C){var y;if(!(C.target instanceof HTMLInputElement))return;const l=(y=C.target.files)==null?void 0:y[0];if(!l)return;const s=new FileReader;s.onload=O=>{if(!(O.target instanceof FileReader))return;const Y=O.target.result;if(Y instanceof ArrayBuffer){if(Y.byteLength>50*1024)return alert("File is too large! (max 50KB)");delete m.soundPath,m.soundFile={name:l.name,type:l.type,data:Y},a.updateSoundData(m),a.save()}},C.target.value="",s.readAsArrayBuffer(l)}function x(m){delete m.soundFile,delete m.soundDef,m.soundPath="#ping",a.save()}function b(m){delete m.soundFile,delete m.soundPath,delete m.soundDef,a.updateSoundData(m),a.save()}function R(m){a.remove(m.id),a.save()}return j(h,(m,C)=>{if(!m||C)return;const l=a.define("new-highlight",{color:"#8803fc",label:"",pattern:m},!0);Me(()=>{const s=i.pattern.get(l);s&&(s.focus(),h.value="")})}),(m,C)=>{const l=$t("tooltip");return d(),f("main",Rn,[Vn,o("div",Pn,[Ln,F(lt,null,{default:ue(()=>[(d(!0),f(ee,null,Te(k(a).getAll(),(s,y,O)=>{var Y;return d(),f("div",{key:s.id,class:"item"},[o("div",{name:"pattern",class:"use-virtual-input",tabindex:"0",onClick:M=>u(s,"pattern")},[o("span",null,I(s.pattern),1),F(Le,{ref_for:!0,ref:M=>i.pattern.set(s,M),modelValue:s.pattern,"onUpdate:modelValue":M=>s.pattern=M,onBlur:M=>T(s,"pattern")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,On),o("div",{name:"label",class:"use-virtual-input",tabindex:"0",onClick:M=>u(s,"label")},[o("span",null,I(s.label),1),F(Le,{ref_for:!0,ref:M=>i.label.set(s,M),modelValue:s.label,"onUpdate:modelValue":M=>s.label=M,onBlur:M=>T(s,"label")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,Hn),o("div",An,[F(Pe,{checked:!!s.flashTitle,"onUpdate:checked":M=>L(s,M)},null,8,["checked","onUpdate:checked"])]),o("div",Nn,[F(Pe,{checked:!!s.regexp,"onUpdate:checked":M=>v(s,M)},null,8,["checked","onUpdate:checked"])]),o("div",Un,[F(Pe,{checked:!!s.caseSensitive,"onUpdate:checked":M=>E(s,M)},null,8,["checked","onUpdate:checked"])]),o("div",Fn,[xe(o("input",{"onUpdate:modelValue":M=>s.color=M,type:"color",onInput:M=>D(s,M)},null,40,Bn),[[It,s.color]])]),o("div",{ref_for:!0,ref_key:"interactRef",ref:p,name:"interact"},[o("button",{ref_for:!0,ref:"soundEffectButton",class:Ee(["sound-button",{"has-sound":!!s.soundFile}]),tabindex:"0"},[xe(F(xn,null,null,512),[[l,"Set Custom Sound"]]),o("div",Gn,[(Y=p.value)!=null&&Y[O]?(d(),Z(es,{key:0,anchor:p.value[O]},{default:ue(()=>[o("button",{active:!s.soundPath&&!s.soundFile,onClick:M=>b(s)}," No Sound ",8,zn),o("button",{active:!!s.soundPath&&!s.soundFile,onClick:M=>x(s)}," Default Sound ",8,Wn),o("button",{active:!!s.soundFile},[o("label",null,[J(" Custom Sound"+I(s.soundFile?"":"...")+" ",1),s.soundFile?(d(),f("p",Yn,I(s.soundFile.name),1)):K("",!0),o("input",{type:"file",accept:"audio/midi, audio/mpeg, audio/ogg, audio/wav, audio/webm, audio/vorbis, audio/ogg",onInput:M=>_(s,M)},null,40,Kn)])],8,jn)]),_:2},1032,["anchor"])):K("",!0)])],2),xe(F(Qt,{tabindex:"0",onClick:M=>R(s)},null,8,["onClick"]),[[l,"Remove"]])],512)])}),128))]),_:1}),o("div",qn,[o("div",Xn,[F(Le,{modelValue:h.value,"onUpdate:modelValue":C[0]||(C[0]=s=>h.value=s),label:"New Highlight..."},{default:ue(()=>[J(" hi ")]),_:1},8,["modelValue"])])])])])}}});const Jn=N(Zn,[["__scopeId","data-v-a22bf14e"]]),Qn={infer:"Infer",12:"12-hour",24:"24-hour"},eo=Object.entries(Qn).map(([e,t])=>[t,e]),to=[S("general.blur_unlisted_emotes","TOGGLE",{path:["General",""],label:"Hide Unlisted Emotes",hint:"If checked, emotes which have not yet been approved for listing on 7tv.app will be blurred",defaultValue:!1}),S("chat.emote_margin","SLIDER",{path:["Chat","Style"],label:"Emote Spacing",hint:"Choose the margin around emotes in chat. Negative values lets them overlap and keep the chatlines inline. 0 Makes the emotes not overlap at all",options:{min:-1,max:1,step:.1,unit:"rem"},defaultValue:-.5,effect(e){document.documentElement.style.setProperty("--seventv-emote-margin",`${e}rem`)}}),S("chat.emote_scale","SLIDER",{path:["Chat","Style"],label:"Emote Scale",ffz_key:"chat.emotes.2x",ffz_transform(e){return typeof e=="number"&&e>0?2:1},hint:"Change how large emotes should be in chat, as a multiple of their original size.",options:{min:.25,max:3,step:.25,unit:"x"},defaultValue:1}),S("chat.show_emote_modifiers","TOGGLE",{path:["Chat","Style"],label:"Show Emote Modifiers",hint:"Show text pollution from BTTV and FFZ emote modifiers (!w, ffzHyper, etc.). Modifiers are not supported yet, this setting only affects the display of their text form",defaultValue:!1}),S("chat.mod_slider","TOGGLE",{path:["Chat","Moderation"],label:"Mod Slider",hint:"Enable the mod slider in channels where you are moderator",defaultValue:!0}),S("chat.mod_messages","TOGGLE",{path:["Chat","Moderation"],label:"Moderation Messages",hint:"If enabled, you will see timeouts/bans in the chat even if you are not a moderator",defaultValue:!1}),S("chat.ignore_clear_chat","TOGGLE",{path:["Chat","Moderation"],label:"Ignore Clear Chat",hint:"If enabled, messages will be kept intact when a moderator clears the chat",defaultValue:!0}),S("chat.slash_me_style","DROPDOWN",{path:["Chat","Style"],label:"/me Style",hint:"How the /me type messages should be displayed",options:[["Nothing",0],["Italic",1],["Colored",2],["Italic + Colored",3]],defaultValue:2}),S("chat.message_batch_duration","SLIDER",{path:["Chat","Performance"],label:"Message Batching",hint:"The time to wait between rendering new messages. Higher values may improve performance and readability, at the cost of chat feeling less responsive",options:{min:25,max:1e3,step:25,unit:"ms",named_thresolds:[[0,50,"Instant"],[50,250,"Fast"],[250,500,"Balanced"],[500,999,"Slow"],[1e3,1e3,"PowerPoint Presentation"]]},defaultValue:250}),S("chat.smooth_scroll_duration","SLIDER",{path:["Chat","Performance"],label:"Smooth scroll chat",hint:"Smoothly scroll new messages into view. This may impact performance.",options:{min:0,max:1500,step:100,unit:"ms"},defaultValue:0}),S("chat.line_limit","SLIDER",{path:["Chat","Performance"],label:"Message Buffer Capacity",hint:"Define the maximum amount of messages displayed in chat. Higher values may affect performance",options:{min:50,max:1e3,step:10,unit:"lines",named_thresolds:[[0,750,""],[751,1e3,"Performance Warning!"]]},defaultValue:150}),S("ui.compact_tooltips","TOGGLE",{path:["Appearance","Style"],label:"Compact tooltips",hint:"Make the tooltips compact instead of showing the full emote",defaultValue:!1}),S("chat.alternating_background","TOGGLE",{path:["Chat","Style"],ffz_key:"chat.lines.alternate",label:"settings.chat_alternating_background.label",hint:"settings.chat_alternating_background.hint",defaultValue:!1}),S("chat.alternating_background_color","COLOR",{path:["Chat","Style"],label:"Alternating Background Color",hint:"Configure the color of alternating background (~6% opacity)",disabledIf:()=>!W("chat.alternating_background").value,effect(e){document.body.style.setProperty("--seventv-chat-alternate-background-color",`${e}0f`)},defaultValue:"#808080"}),S("chat.padding","DROPDOWN",{path:["Chat","Style"],label:"Padding Style",ffz_key:"chat.lines.padding",ffz_transform(e){return e?1:0},effect(e){document.body.style.setProperty("--seventv-chat-padding",{0:"0.25rem",1:"1rem"}[e]??null)},hint:"Change the padding style of chat lines",options:[["Full-Width",0],["Native (Twitch-like)",1]],defaultValue:1}),S("chat.font_size","SLIDER",{path:["Chat","Style"],label:"Font Size",ffz_key:"chat.font-size",ffz_transform(e){return typeof e=="number"?e:13},effect(e){typeof e=="number"&&(e!==13?document.body.style.setProperty("--seventv-chat-font-size",`${e}px`):document.body.style.removeProperty("--seventv-chat-font-size"))},hint:"Change the size of text in chat, when set to default the size will be inferred from Twitch appearence settings",options:{min:1,max:30,step:1,unit:"px",named_values:[[13,13,"Default"]]},defaultValue:13}),S("chat.colored_mentions","TOGGLE",{path:["Chat","Style"],label:"Colored Mentions",hint:"Show the color of users mentioned in chat",defaultValue:!0}),S("chat.deleted_messages","DROPDOWN",{path:["Chat","Style"],label:"Deleted Message Style",hint:"Control how deleted messages are displayed in chat",effect(e){switch(document.body.style.removeProperty("--seventv-chat-deleted-display"),document.body.style.setProperty("--seventv-chat-deleted-opacity","0.5"),document.body.style.setProperty("--seventv-chat-deleted-prefix","â€”"),e){case 0:document.body.style.setProperty("--seventv-chat-deleted-decoration","none"),document.body.style.setProperty("--seventv-chat-deleted-opacity","0"),document.body.style.setProperty("--seventv-chat-deleted-display","none"),document.body.style.setProperty("--seventv-chat-deleted-prefix","");break;case 1:document.body.style.setProperty("--seventv-chat-deleted-decoration","none");break;case 2:document.body.style.setProperty("--seventv-chat-deleted-decoration","line-through");break;case 3:document.body.style.removeProperty("--seventv-chat-deleted-decoration"),document.body.style.removeProperty("--seventv-chat-deleted-opacity");break}},options:[["Hidden",0],["Dimmed",1],["Strikethrough",2],["Keep",3]],defaultValue:1}),S("chat.timestamp_with_seconds","TOGGLE",{path:["Chat","Style"],label:"Timestamp Seconds",hint:"If checked, timestamps in chat will also show seconds",defaultValue:!1}),S("chat.timestamp_format","DROPDOWN",{path:["Chat","Style"],label:"Timestamp Format",defaultValue:"infer",hint:"Infer will get the format from the current locale.",options:eo}),S("chat.user_card","TOGGLE",{path:["Chat","Tools"],label:"Improve the User Card",hint:"Replace the default user card with a faster, more useful version",defaultValue:!0}),S("chat.copy_icon_toggle","TOGGLE",{path:["Chat","Tools"],label:"Copy Icon",hint:"Show a 'Copy' icon when hovering over a chat message to copy the message",defaultValue:!0}),S("highlights.basic.mention","TOGGLE",{path:["Highlights","Built-In"],label:"Show Mention Highlights",hint:"Whether or not to highlight messages that mention or reply to you in chat",defaultValue:!0}),S("highlights.basic.mention_sound","TOGGLE",{path:["Highlights","Built-In"],label:"Play Sound on Mention",hint:"Play a sound when you are mentioned in chat",disabledIf:()=>!W("highlights.basic.mention").value,defaultValue:!1}),S("highlights.basic.mention_title_flash","TOGGLE",{path:["Highlights","Built-In"],label:"Flash Title on Mention",hint:"When tabbed out, the username of users who mention you will flash in the title",disabledIf:()=>!W("highlights.basic.mention").value,defaultValue:!0}),S("highlights.basic.monitored_low_trust_user","TOGGLE",{path:["Highlights","Built-In"],label:"Show Monitored Suspicious User Highlights (Moderator only)",hint:"Whether or not to highlight users who are a monitored suspicious user",defaultValue:!0}),S("highlights.basic.restricted_low_trust_user","TOGGLE",{path:["Highlights","Built-In"],label:"Show Restricted Suspicious User Highlights (Moderator only)",hint:"Whether or not to highlight users who are a restricted suspicious user",defaultValue:!0}),S("highlights.basic.first_time_chatter","TOGGLE",{path:["Highlights","Built-In"],label:"Show First-Time Chatter Highlights",hint:"Whether or not to highlight users who are chatting for the first time",defaultValue:!0}),S("highlights.basic.self","TOGGLE",{path:["Highlights","Built-In"],label:"Show Highlights for Your Own Messages",hint:"Whether or not to highlight messages sent by yourself",defaultValue:!1}),S("highlights.custom","CUSTOM",{path:["Highlights",""],custom:{component:at(Jn),gridMode:"new-row"},label:"Custom Highlights",hint:"Create custom highlights for specific words or phrases",defaultValue:new Map}),S("highlights.sound_volume","SLIDER",{path:["Highlights","Built-In"],label:"Highlight Sound Volume",hint:"Control the volume at which sound plays upon being mentioned",options:{min:0,max:100,step:1,unit:"%"},defaultValue:75}),S("highlights.display_style","DROPDOWN",{path:["Highlights","Style"],label:"Highlighted Message Style",hint:"Choose how or if, to show highlighted messages in chat",options:[["Standard",0],["Minimal (Solid color)",1],["None (No visual)",2]],defaultValue:0}),S("highlights.opacity","SLIDER",{path:["Highlights","Style"],label:"Highlight Opacity",hint:"Change how bright highlights apear in chat",options:{min:0,max:100,step:1},defaultValue:10}),S("vanity.nametag_paints","TOGGLE",{path:["Appearance","Vanity"],label:"Nametag Paints",hint:"Whether or not to display nametag paints",defaultValue:!0})],so=B({__name:"ChatModule",setup(e,{expose:t}){const{dependenciesMet:a,markAsReady:h}=Lt("chat",{name:"Chat",depends_on:[]}),i=ce(new WeakMap),p=_e({parentSelector:".chat-room__content",maxDepth:100,predicate:_=>{var x;return((x=_.props)==null?void 0:x.primaryColorHex)!==void 0}}),u=_e({parentSelector:".chat-room__content",maxDepth:100,predicate:_=>_.scrollRef},{trackRoot:!0,hooks:{render:function(_){return _.component.props.children.map(b=>b.key?Vt(_,b.key,b):null)}}}),T=_e({parentSelector:".chat-shell, .stream-chat",maxDepth:250,predicate:_=>{var x;return _.pushMessage&&((x=_.props)==null?void 0:x.messageHandlerAPI)}},{hooks:{update(_){i.set(_,!!_.component.props.channelID)}}}),L=_e({parentSelector:".stream-chat",maxDepth:250,predicate:_=>_.prependHistoricalMessages&&_.buffer&&_.blockedUsers}),v=_e({parentSelector:".stream-chat",maxDepth:250,predicate:_=>_.onClearChatEvent}),E=P(!1),D=Ae(E,200);return j(()=>[T.instances,T.instances],([_,x])=>E.value=_.length===x.length,{immediate:!0}),h(),t({chatController:T,chatList:u,chatRoom:p,messageSendMiddleware:new Map}),(_,x)=>(d(!0),f(ee,null,Te(k(T).instances,(b,R)=>(d(),f(ee,{key:b.identifier},[k(a)&&k(D)&&i.get(b)?(d(),Z(Cn,{key:0,list:k(u).instances[0]??void 0,controller:k(T).instances[R],room:k(p).instances[0]??void 0,buffer:k(L).instances[0]??void 0,events:k(v).instances[0]??void 0},null,8,["list","controller","room","buffer","events"])):K("",!0)],64))),128))}}),So=Object.freeze(Object.defineProperty({__proto__:null,config:to,default:so},Symbol.toStringTag,{value:"Module"}));export{So as _};
