import{_ as x,l as w,f as y,j as p,d as M,aI as k,e as C,a as E,aV as T,w as D,o as L,at as $,aW as g}from"./seventv.index.3.0.15.1000.js";import{k as S,o as U}from"./seventv.index.3.0.15.10003.js";import{r as f,c as z}from"./seventv.preload-helper.3.0.15.1000.js";const F={},H={width:"1em",height:"1em",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"currentColor"},I=p("g",null,[p("path",{d:"M8.5 10L4 5.5 5.5 4 10 8.5 14.5 4 16 5.5 11.5 10l4.5 4.5-1.5 1.5-4.5-4.5L5.5 16 4 14.5 8.5 10z"})],-1),O=[I];function R(v,_){return w(),y("svg",H,O)}const W=x(F,[["render",R]]),V=M({__name:"UiDraggable",props:{initialPosition:{},initialAnchor:{},initialMiddleware:{},initialPlacement:{},emitClickout:{type:Boolean},handle:{},once:{type:Boolean}},emits:["clickout"],setup(v,{emit:_}){const e=v,n=f(),A=[k({crossAxis:!0,mainAxis:!0})],b=C(()=>e.handle??n.value);let h;const c=f(0),r=f(0);async function s(t,i){if(!n.value)return;const l=Symbol();h=l;const{x:d,y:m}=await g({getBoundingClientRect(){return{width:0,height:0,x:t,y:i,top:i,left:t,right:t,bottom:i}},contextElement:e.initialAnchor instanceof HTMLElement?e.initialAnchor:void 0},n.value,{middleware:A,placement:"bottom-start"});h===l&&(c.value=d,r.value=m)}async function B(t){if(!n.value)return;const{x:i,y:l}=await g(t,n.value,{middleware:e.initialMiddleware,placement:e.initialPlacement});await s(i,l)}let u;S(n,{onMove({x:t,y:i}){u||window.requestAnimationFrame(()=>{s(t,i),u=void 0})},handle:b,preventDefault:!0});let a;E(()=>[n.value,e.initialPosition,e.initialMiddleware,e.initialPlacement],()=>{a==null||a(),a=void 0;const t=n.value;if(!t)return;let i=!0;a=T({getBoundingClientRect(){return{width:0,height:0,x:c.value,y:r.value,top:r.value,left:c.value,right:c.value,bottom:r.value}},contextElement:e.initialAnchor instanceof HTMLElement?e.initialAnchor:void 0},t,()=>{var l,d;if(i){if(e.initialAnchor)B(e.initialAnchor);else{const m=((l=e.initialPosition)==null?void 0:l[0])??0,P=((d=e.initialPosition)==null?void 0:d[1])??0;s(m,P)}i=!1}else e.once||s(c.value,r.value)})},{immediate:!0});let o;return D(()=>{o==null||o(),o=void 0,e.emitClickout&&(o=U(n.value,t=>_("clickout",t)))}),L(()=>{a==null||a(),o==null||o(),u&&cancelAnimationFrame(u)}),(t,i)=>(w(),y("div",{ref_key:"el",ref:n,class:"draggable-container",style:z({top:`${r.value}px`,left:`${c.value}px`})},[$(t.$slots,"default",{},void 0,!0)],4))}});const X=x(V,[["__scopeId","data-v-8dac15e8"]]);export{W as T,X as U};
