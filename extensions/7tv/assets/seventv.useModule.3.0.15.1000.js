import{b as f,r as g,a9 as i,l as r}from"./seventv.preload-helper.3.0.15.1000.js";import{a as m,a4 as M,n as b}from"./seventv.index.3.0.15.1000.js";const o=f({modules:{}});function $(n){return o.modules[n]??null}function k(n){const e=g(null);if(o.modules[n]&&(e.value=o.modules[n]),!e.value){const a=m(o.modules,l=>{e.value=l[n],e.value&&a()})}return e}function _(n,e){o.modules[n]=f({id:n,name:e.name,enabled:!0,depends_on:e.depends_on,instance:null});const a=i(o.modules,n),l=i(a.value,"ready"),u=g(!1),c=a.value.depends_on,d=[];for(const t of c){const s=o.modules[t];s&&d.push(new Promise(v=>{const y=m(s,()=>{s.ready&&(y(),v(s))})}))}d.length>0?(r.debug(`<Module/${e.name}>`,"Waiting for modules:",c.join(", ")),Promise.all(d).then(()=>{u.value=!0,r.debug(`<Module/${e.name}>`,`All dependencies met (${d.length})`)})):u.value=!0;function p(){const t=m(u,s=>{s&&(b(()=>t()),a.value.ready=!0,r.debug(`<Module/${e.name}>`,"Ready"))},{immediate:!0})}return M(()=>o.modules[n].ready=!1),{ready:l,dependenciesMet:u,markAsReady:p}}export{k as a,_ as d,$ as g};
